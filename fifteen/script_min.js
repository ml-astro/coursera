var moves=0;var places=[];var coords=[];newGame();var timeStart;var timeEnd;function newGame(){document.querySelector('.board').innerHTML='';document.querySelector('h1').innerHTML='ПЯТНАШКИ';document.querySelector('.moveCount').innerHTML='';places=[];moves=0;while(places.length<16){let num=Math.floor(Math.random()*16);if(!places.includes(num)){places.push(num)}}for(let ypos=0;ypos<=75;ypos+=25){for(let xpos=0;xpos<=75;xpos+=25){coords.push([ypos,xpos])}}buildBoard()}function buildBoard(){let element=document.querySelector('.board');for(let i=0;i<16;i+=1){let ypos=coords[i][0];let xpos=coords[i][1];element.innerHTML+='<div class="cell" onclick="move(this)" id="cell'+places[i]+'" style="top:'+ypos+'%; left:'+xpos+'%"><p>'+places[i]+'</p></div> '}timeStart=new Date()}function move(cell){let emptyCell=document.querySelector('#cell0');let ypos=cell.style.top;let xpos=cell.style.left;let newYpos=emptyCell.style.top;let newXpos=emptyCell.style.left;if((ypos.slice(0,-1)-newYpos.slice(0,-1))==0&&Math.abs(xpos.slice(0,-1)-newXpos.slice(0,-1))==25||(xpos.slice(0,-1)-newXpos.slice(0,-1))==0&&Math.abs(ypos.slice(0,-1)-newYpos.slice(0,-1))==25){emptyCell.style.top=ypos;emptyCell.style.left=xpos;cell.style.top=newYpos;cell.style.left=newXpos;moves+=1;checkForWin()}}function checkForWin(){for(let i=1;i<16;i+=1){let cell=document.getElementById('cell'+i);if(cell.style.top.slice(0,-1)!=coords[i-1][0]||cell.style.left.slice(0,-1)!=coords[i-1][1]){break;}else if(i==15){document.querySelector('h1').innerHTML='ПОБЕДА!';timeEnd=new Date();endgame()}}}checkForWin();function endgame(){for(let i=0;i<16;i+=1){document.querySelector('#cell'+i).onclick=null}document.querySelector('button').innerHTML='НОВАЯ ИГРА';document.querySelector('button').setAttribute('onclick','newGame();');document.querySelector('.moveCount').innerHTML+='Количество ходов: '+moves+'</br>  ';document.querySelector('.moveCount').innerHTML+='Потрачено времени: '+Math.floor((timeEnd-timeStart)/1000)+' сек.'}
